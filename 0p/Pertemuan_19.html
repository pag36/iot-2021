
<!DOCTYPE HTML>
<html lang="id" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>16. Praktik Update Firmware OTA Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../0q/Pertemuan_21.html" />
    
    
    <link rel="prev" href="../0o/Pertemuan_18.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Ketik untuk mencari" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Pendahuluan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../00/kontrak.html">
            
                <a href="../00/kontrak.html">
            
                    
                    Kontrak Kuliah
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../0a/0a.pertemuan1.html">
            
                <a href="../0a/0a.pertemuan1.html">
            
                    
                    01. Memahami Konsep dan arsitektur IoT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../0b/0b.pertemuan2.html">
            
                <a href="../0b/0b.pertemuan2.html">
            
                    
                    02. Pengantar Elektronik
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../0c/0c.pertemuan3.html">
            
                <a href="../0c/0c.pertemuan3.html">
            
                    
                    03. Pengenalan Jenis-Jenis dan Cara Kerja Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../0d/0d.pertemuan4.html">
            
                <a href="../0d/0d.pertemuan4.html">
            
                    
                    04. Pengenalan Jenis-Jenis dan Cara Kerja Aktuator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../0e/0e.pertemuan6.html">
            
                <a href="../0e/0e.pertemuan6.html">
            
                    
                    05. Jenis Elektronik Development Board
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../0f/0f.pertemuan7.html">
            
                <a href="../0f/0f.pertemuan7.html">
            
                    
                    06. Jenis Komunikasi Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../0g/0f.pertemuan8.html">
            
                <a href="../0g/0f.pertemuan8.html">
            
                    
                    07. Pengenalan Teknologi Smart Card
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../0h/0h.pertemuan9.html">
            
                <a href="../0h/0h.pertemuan9.html">
            
                    
                    08. Praktik Dasar Elektronika
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../0i/0i.pertemuan11.html">
            
                <a href="../0i/0i.pertemuan11.html">
            
                    
                    09. Praktik Pemrograman Microcontroller
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../0j/0j.pertemuan12.html">
            
                <a href="../0j/0j.pertemuan12.html">
            
                    
                    10. Praktik Sensor DHT11, LCD, dan RTC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../0k/0k.pertemuan13.html">
            
                <a href="../0k/0k.pertemuan13.html">
            
                    
                    11. Praktik Sensor Ultrasonic PIR LDR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../0l/0l.pertemuan14.html">
            
                <a href="../0l/0l.pertemuan14.html">
            
                    
                    12. Praktik Aktuator LED dan Relay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../0m/0m.pertemuan16.html">
            
                <a href="../0m/0m.pertemuan16.html">
            
                    
                    13. Praktik Aktuator Buzzer dan Servo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../0n/Pertemuan_17.html">
            
                <a href="../0n/Pertemuan_17.html">
            
                    
                    14. Pengenalan Macam-Macam Platform IoT dan Koneksi W-LAN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../0o/Pertemuan_18.html">
            
                <a href="../0o/Pertemuan_18.html">
            
                    
                    15. Pengenalan LPWAN, LoRa, dan NB-IoT
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.18" data-path="Pertemuan_19.html">
            
                <a href="Pertemuan_19.html">
            
                    
                    16. Praktik Update Firmware OTA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../0q/Pertemuan_21.html">
            
                <a href="../0q/Pertemuan_21.html">
            
                    
                    17. Pengenalan Komunikasi Protokol HTTP
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Dipublikasikan dengan GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >16. Praktik Update Firmware OTA</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="pertemuan-ke-19--update-over-the-air-ota">Pertemuan ke 19 : Update Over the Air (OTA)</h1>
<h2 id="topik-bahasan">Topik Bahasan</h2>
<p>Mempelajari tentang apa itu update OTA, sejarah awal tentang update OTA, mekanisme update melalui OTA, kelebihan dan kekurangan update OTA, dan praktik update software melalui OTA</p>
<h2 id="deskripsi">Deskripsi</h2>
<ul>
<li>Mampu menjelaskan dan mendeskripsikan tentang apa itu update OTA</li>
<li>Mengetahui sejarah perkembangan update OTA</li>
<li>Mampu menerapkan update OTA didalam perangkat IoT menggunakan web updater</li>
</ul>
<h2 id="teori-singkat">Teori Singkat</h2>
<p>Over the air (OTA) merupakan pengiriman software, firmware, ataupun data lain menggunakan media nirkabel ke perangkat seperti mobile phones, set-top boxes, electric car, atau juga perlengkapan komunikasi secure voice.</p>
<h2 id="sejarah-ota">Sejarah OTA</h2>
<ul>
<li>Operator seluler mengirim pembaruan OTA melalui SMS</li>
<li>Mengkonfigurasi pembaruan data di kartu SIM;</li>
<li>Mendistribusikan pembaruan sistem; </li>
<li>Layanan akses, seperti protokol akses nirkabel (WAP) atau layanan pesan multimedia (MMS)</li>
<li>Pembaruan OTA juga memungkinkan operator seluler untuk mengaktifkan langganan pengguna</li>
<li>OEM dapat menggunakan pembaruan OTA untuk memperbaiki bug melalui firmware dan mengubah antarmuka pengguna</li>
<li>Proliferasi IoT menggunakan update OTA untuk autonomous vehicle, smart home speaker, dan perangkat IoT yang lain.</li>
<li>Frekuensi yang tidak berlisensi, seperti 868 MHz, dan penggunaan protokol transmisi kecepatan data rendah.</li>
<li>Apple memperkenalkan pembaruan OTA ke perangkat iOS dengan rilis iOS 5.0.1</li>
<li>Menghubungkan perangkat ke komputer menggunakan kabel USB dan memperbarui OS melalui iTunes</li>
<li>Apple dapat mengirimkan pembaruan dari jarak jauh dalam file zip yang tidak terenkripsi</li>
</ul>
<p><img src="image8.png" alt="8"></p>
<h2 id="cara-kerja-ota-manual">Cara Kerja OTA (Manual)</h2>
<ul>
<li>Pembaruan OTA manual memberi tahu pengguna tentang pembaruan yang tersedia</li>
<li>Pengguna dapat menerima atau menolak mengunduh pembaruan di perangkat mereka</li>
<li>Operator seluler juga dapat mengirim pesan SMS ke semua pengguna yang memiliki perangkat tertentu</li>
<li>Meminta mereka untuk menghubungi nomor untuk menerima pembaruan perangkat lunak saat yang paling nyaman</li>
</ul>
<p><img src="image9.jpeg" alt="9"></p>
<h2 id="cara-kerja-ota-otomatis">Cara Kerja OTA (Otomatis)</h2>
<ul>
<li>Sistem back-end operator seluler dapat mendorong pembaruan firmware ke perangkat pengguna</li>
<li>Original Equipment Manufacturer (OEM) dapat menggunakan produk yang mengotomatiskan pembaruan OTA</li>
<li>Perangkat yang berada di lokasi terpencil, seperti sensor IoT, atau perangkat yang tidak sering berhubungan dengan manusia</li>
</ul>
<p><img src="image10.jpeg" alt="10"></p>
<h2 id="kelebihan-ota">Kelebihan OTA</h2>
<ul>
<li>Lebih efisien bagi OEM untuk memperbaiki bug dan memperbarui perangkat lunak</li>
<li>Mengatasi masalah sebelum perangkat diluncurkan, yang dapat menghemat waktu dan uang OEM</li>
<li>Mengurangi proses pengembangan perangkat lunak dan jaminan kualitas (QA)
Lebih mudah memperbarui perangkat lunak pada perangkat yang sulit diakses</li>
<li>Nyaman bagi pengguna akhir karena mencegah mereka dari keharusan pergi ke toko fisik</li>
</ul>
<p><img src="image11.jpeg" alt="11"></p>
<h2 id="kekurangan-ota">Kekurangan OTA</h2>
<ul>
<li>Dapat memungkinkan peretas mengubah perangkat lunak perangkat</li>
<li>Peretas dapat mendorong pembaruan tidak resmi yang memperkenalkan kerentanan keamanan.</li>
<li>Memasang adware dan spyware untuk mengumpulkan informasi pribadi dari perangkat</li>
</ul>
<p><img src="image12.jpeg" alt="12"></p>
<h2 id="praktikum-ota">Praktikum OTA</h2>
<ol>
<li>Praktikum ini adalah praktikum singkat yang bertujuan untuk menunjukkan bagaimana memprogram OTA memakai ESP32 dan web updater didalam Arduino IDE</li>
<li><p>OTA web updater memungkinkan untuk mengupdate kode terbaru kedalam ESP32 menggunakan web browser tanpa membutuhkan koneksi serial antara ESP32 dan komputer</p>
<ul>
<li><img src="OTAWebUpdates_ESP32_thumbnail.webp" alt="13"></li>
</ul>
</li>
<li><p>Sketch Arduino IDE pertama kali harus diupload ke ESP32 menggunakan serial port/USB. Sketch ini harus memiliki kode untuk web updater sehingga nantinya dapat digunakan untuk mengupload kode program yang baru melalui browser</p>
</li>
<li>Web updater akan membuat ESP32 menjadi web server sehingga memungkinkan untuk mengaksesnya untuk mengupload skecth baru melalui web browser</li>
<li>Untuk setiap sketch baru yang akan diupload, harus memiliki rutin web updater, bila tidak maka anda tidak akan dapat mengakses web browser lagi dan tidak dapat melakukan update over-the-air</li>
<li><p>Untuk memulai memprogram OTA, install dulu library ArduinoOTA seperti gambar dibawah ini</p>
<ul>
<li><img src="2024-08-08_034732.png" alt="14"></li>
</ul>
</li>
<li><p>Tuliskan kode program yang menyertakan web updater ke file sketch dan beri nama sesuai kehendak anda. Kode ini menyertakan akses ke jaringan WiFi anda.</p>
</li>
</ol>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;WiFi.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;WiFiClient.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;WebServer.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ESPmDNS.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Update.h&gt;</span></span>

<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* host = <span class="hljs-string">&quot;esp32&quot;</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* ssid = <span class="hljs-string">&quot;GANTI DENGAN SSID ANDA&quot;</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* password = <span class="hljs-string">&quot;GANTI PASSWORD WIFI&quot;</span>;

<span class="hljs-function">WebServer <span class="hljs-title">server</span><span class="hljs-params">(<span class="hljs-number">80</span>)</span></span>;

<span class="hljs-comment">/*
 * Login page
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* loginIndex = 
 <span class="hljs-string">&quot;&lt;form name=&apos;loginForm&apos;&gt;&quot;</span>
    <span class="hljs-string">&quot;&lt;table width=&apos;20%&apos; bgcolor=&apos;A09F9F&apos; align=&apos;center&apos;&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;tr&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;td colspan=2&gt;&quot;</span>
                <span class="hljs-string">&quot;&lt;center&gt;&lt;font size=4&gt;&lt;b&gt;HALAMAN LOGIN ESP32&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;&quot;</span>
                <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;/td&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;td&gt;Username:&lt;/td&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;td&gt;&lt;input type=&apos;text&apos; size=25 name=&apos;userid&apos;&gt;&lt;br&gt;&lt;/td&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;tr&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;td&gt;Password:&lt;/td&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;td&gt;&lt;input type=&apos;Password&apos; size=25 name=&apos;pwd&apos;&gt;&lt;br&gt;&lt;/td&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;tr&gt;&quot;</span>
            <span class="hljs-string">&quot;&lt;td&gt;&lt;input type=&apos;submit&apos; onclick=&apos;check(this.form)&apos; value=&apos;Login&apos;&gt;&lt;/td&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>
    <span class="hljs-string">&quot;&lt;/table&gt;&quot;</span>
<span class="hljs-string">&quot;&lt;/form&gt;&quot;</span>
<span class="hljs-string">&quot;&lt;script&gt;&quot;</span>
    <span class="hljs-string">&quot;function check(form)&quot;</span>
    <span class="hljs-string">&quot;{&quot;</span>
    <span class="hljs-string">&quot;if(form.userid.value==&apos;admin&apos; &amp;&amp; form.pwd.value==&apos;admin&apos;)&quot;</span>
    <span class="hljs-string">&quot;{&quot;</span>
    <span class="hljs-string">&quot;window.open(&apos;/serverIndex&apos;)&quot;</span>
    <span class="hljs-string">&quot;}&quot;</span>
    <span class="hljs-string">&quot;else&quot;</span>
    <span class="hljs-string">&quot;{&quot;</span>
    <span class="hljs-string">&quot; alert(&apos;Error Password or Username&apos;)/*displays error message*/&quot;</span>
    <span class="hljs-string">&quot;}&quot;</span>
    <span class="hljs-string">&quot;}&quot;</span>
<span class="hljs-string">&quot;&lt;/script&gt;&quot;</span>;

<span class="hljs-comment">/*
 * Server Index Page
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* serverIndex = 
<span class="hljs-string">&quot;&lt;script src=&apos;https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js&apos;&gt;&lt;/script&gt;&quot;</span>
<span class="hljs-string">&quot;&lt;form method=&apos;POST&apos; action=&apos;#&apos; enctype=&apos;multipart/form-data&apos; id=&apos;upload_form&apos;&gt;&quot;</span>
   <span class="hljs-string">&quot;&lt;input type=&apos;file&apos; name=&apos;update&apos;&gt;&quot;</span>
        <span class="hljs-string">&quot;&lt;input type=&apos;submit&apos; value=&apos;Update&apos;&gt;&quot;</span>
    <span class="hljs-string">&quot;&lt;/form&gt;&quot;</span>
 <span class="hljs-string">&quot;&lt;div id=&apos;prg&apos;&gt;progress: 0%&lt;/div&gt;&quot;</span>
 <span class="hljs-string">&quot;&lt;script&gt;&quot;</span>
  <span class="hljs-string">&quot;$(&apos;form&apos;).submit(function(e){&quot;</span>
  <span class="hljs-string">&quot;e.preventDefault();&quot;</span>
  <span class="hljs-string">&quot;var form = $(&apos;#upload_form&apos;)[0];&quot;</span>
  <span class="hljs-string">&quot;var data = new FormData(form);&quot;</span>
  <span class="hljs-string">&quot; $.ajax({&quot;</span>
  <span class="hljs-string">&quot;url: &apos;/update&apos;,&quot;</span>
  <span class="hljs-string">&quot;type: &apos;POST&apos;,&quot;</span>
  <span class="hljs-string">&quot;data: data,&quot;</span>
  <span class="hljs-string">&quot;contentType: false,&quot;</span>
  <span class="hljs-string">&quot;processData:false,&quot;</span>
  <span class="hljs-string">&quot;xhr: function() {&quot;</span>
  <span class="hljs-string">&quot;var xhr = new window.XMLHttpRequest();&quot;</span>
  <span class="hljs-string">&quot;xhr.upload.addEventListener(&apos;progress&apos;, function(evt) {&quot;</span>
  <span class="hljs-string">&quot;if (evt.lengthComputable) {&quot;</span>
  <span class="hljs-string">&quot;var per = evt.loaded / evt.total;&quot;</span>
  <span class="hljs-string">&quot;$(&apos;#prg&apos;).html(&apos;progress: &apos; + Math.round(per*100) + &apos;%&apos;);&quot;</span>
  <span class="hljs-string">&quot;}&quot;</span>
  <span class="hljs-string">&quot;}, false);&quot;</span>
  <span class="hljs-string">&quot;return xhr;&quot;</span>
  <span class="hljs-string">&quot;},&quot;</span>
  <span class="hljs-string">&quot;success:function(d, s) {&quot;</span>
  <span class="hljs-string">&quot;console.log(&apos;success!&apos;)&quot;</span> 
 <span class="hljs-string">&quot;},&quot;</span>
 <span class="hljs-string">&quot;error: function (a, b, c) {&quot;</span>
 <span class="hljs-string">&quot;}&quot;</span>
 <span class="hljs-string">&quot;});&quot;</span>
 <span class="hljs-string">&quot;});&quot;</span>
 <span class="hljs-string">&quot;&lt;/script&gt;&quot;</span>;

<span class="hljs-comment">/*
 * setup function
 */</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  Serial.begin(<span class="hljs-number">115200</span>);

  <span class="hljs-comment">// KONEK KE JARINGAN WIFI</span>
  WiFi.begin(ssid, password);
  Serial.println(<span class="hljs-string">&quot;&quot;</span>);

  <span class="hljs-comment">// MENUNGGU KONEKSI</span>
  <span class="hljs-keyword">while</span> (WiFi.status() != WL_CONNECTED) {
    delay(<span class="hljs-number">500</span>);
    Serial.print(<span class="hljs-string">&quot;.&quot;</span>);
  }
  Serial.println(<span class="hljs-string">&quot;&quot;</span>);
  Serial.print(<span class="hljs-string">&quot;Terhubung ke : &quot;</span>);
  Serial.println(ssid);
  Serial.print(<span class="hljs-string">&quot;Alamat IP : &quot;</span>);
  Serial.println(WiFi.localIP());

  <span class="hljs-comment">/*menggunakan MDNS untuk memberi nama host*/</span>
  <span class="hljs-keyword">if</span> (!MDNS.begin(host)) { <span class="hljs-comment">//http://esp32.local</span>
    Serial.println(<span class="hljs-string">&quot;Error mengkonfigurasi MDNS responder!&quot;</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {
      delay(<span class="hljs-number">1000</span>);
    }
  }
  Serial.println(<span class="hljs-string">&quot;mDNS responder berjalan&quot;</span>);
  server.on(<span class="hljs-string">&quot;/&quot;</span>, HTTP_GET, []() {
    server.sendHeader(<span class="hljs-string">&quot;Connection&quot;</span>, <span class="hljs-string">&quot;close&quot;</span>);
    server.send(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;text/html&quot;</span>, loginIndex);
  });
  server.on(<span class="hljs-string">&quot;/serverIndex&quot;</span>, HTTP_GET, []() {
    server.sendHeader(<span class="hljs-string">&quot;Connection&quot;</span>, <span class="hljs-string">&quot;close&quot;</span>);
    server.send(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;text/html&quot;</span>, serverIndex);
  });
  <span class="hljs-comment">/*menghandle proses upload file update */</span>
  server.on(<span class="hljs-string">&quot;/update&quot;</span>, HTTP_POST, []() {
    server.sendHeader(<span class="hljs-string">&quot;Connection&quot;</span>, <span class="hljs-string">&quot;close&quot;</span>);
    server.send(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;text/plain&quot;</span>, (Update.hasError()) ? <span class="hljs-string">&quot;FAIL&quot;</span> : <span class="hljs-string">&quot;OK&quot;</span>);
    ESP.restart();
  }, []() {
    HTTPUpload&amp; upload = server.upload();
    <span class="hljs-keyword">if</span> (upload.status == UPLOAD_FILE_START) {
      Serial.<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Update: %s\n&quot;</span>, upload.filename.c_str());
      <span class="hljs-keyword">if</span> (!Update.begin(UPDATE_SIZE_UNKNOWN)) { 
        Update.printError(Serial);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (upload.status == UPLOAD_FILE_WRITE) {
      <span class="hljs-comment">/* flashing firmware ke ESP*/</span>
      <span class="hljs-keyword">if</span> (Update.write(upload.buf, upload.currentSize) != upload.currentSize) {
        Update.printError(Serial);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (upload.status == UPLOAD_FILE_END) {
      <span class="hljs-keyword">if</span> (Update.end(<span class="hljs-literal">true</span>)) { <span class="hljs-comment">//true to set the size to the current progress</span>
        Serial.<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Update sukses: %u\nRebooting...\n&quot;</span>, upload.totalSize);
      } <span class="hljs-keyword">else</span> {
        Update.printError(Serial);
      }
    }
  });
  server.begin();
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  server.handleClient();
  delay(<span class="hljs-number">1</span>);
}
</code></pre>
<ol>
<li>Compile dan upload kode program tersebut ke ESP32 anda.</li>
<li><p>Segera setelah proses upload berhasil, bukalah Serial Monitor pada Arduino IDE dengan baud rate 115200, dan copy-lah alamat IP ESP32 yang tampil di terminal seperti ditunjukkan oleh gambar dibawah ini. Apabila belum muncul, maka matikan terus hidupkan lagi ESP32 anda</p>
<ul>
<li><img src="2024-08-08_041816.png" alt="15"></li>
</ul>
</li>
<li><p>Buka web browser pada komputer anda, dan isikan alamat IP ESP32 kedalam web browser sehingga muncul halaman login seperti gambar dibawah ini (pastikan komputer dan ESP32 anda terhubung ke jaringan yang sama). Untuk login, gunakan :</p>
<ul>
<li><strong>username</strong> : admin</li>
<li><strong>password</strong> : admin</li>
</ul>
<p><strong>Note :</strong> Anda dapat mengganti username dan password didalam kode program</p>
<ul>
<li><img src="2024-08-08_043256.png" alt="16"></li>
</ul>
</li>
<li><p>Untuk mengupdate kode program didalam ESP32 anda melalui update OTA (melalui web updater) maka anda perlu menyiapkan file binary baru dengan ekstensi <strong>.bin</strong> (file sketch baru yang sudah di-compile). Tambahkan kode program ini kedalam file sketch yang lama dimana tambahan kode program ini bertujuan untuk meng-update fungsionalitas dari kode program yang lama sehingga dapat membuat LED biru pada board ESP32 berkedip.</p>
<ul>
<li><img src="2024-08-08_044241.png" alt="17"></li>
<li><img src="2024-08-08_044545-1.png" alt="18"></li>
<li><img src="2024-08-08_044915.png" alt="19"></li>
</ul>
</li>
<li><p>Compile kode program tersebut menjadi file binary melalui menu <strong>Sketch -&gt; Eksport Compiled Binary</strong> pada Arduino IDE seperti gambar dibawah ini</p>
<ul>
<li><img src="2024-08-08_045327.png" alt="20"></li>
</ul>
</li>
<li><p>Kemudian, buka sketch folder anda melalu menu <strong>Sketch -&gt; Show sketch folder</strong> pada Arduino IDE seperti gambar dibawah ini</p>
<ul>
<li><img src="2024-08-08_050004.png" alt="21"></li>
</ul>
</li>
<li><p>Didalam folder sketch, masuklah kedalam folder <strong>build</strong> dan cari file dengan ekstensi <strong>.bin</strong> seperti gambar dibawah ini. File ini yang nanti akan kita upload untuk mengupdate software didalam ESP32</p>
<ul>
<li><img src="2024-08-08_050259.png" alt="22"></li>
</ul>
</li>
<li><p>Upload file tadi melalui web updater seperti ditunjukkan oleh gambar dibawah ini dan kemudian klik tombol <strong>update</strong> untuk melakukan proses updating hingga 100%</p>
<ul>
<li><img src="2024-08-08_050930.png" alt="23"></li>
</ul>
</li>
<li><p>Bila proses update selesai, seharusnya saat ini anda dapat melihat pada ESP32 led biru berkedip yang menandakan bahwa proses update OTA berhasil</p>
</li>
</ol>
<h2 id="tugas-individu">Tugas Individu</h2>
<ol>
<li>Silakan mencari teknologi yang sudah menerapakan model update menggunakan OTA, deskripsikan model update tersebut baik software ataupun firmware seperti apa</li>
<li>Cobalah cari contoh coding lainnya metode update OTA yang dapat diterapkan pada perangkat IoT</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> hasil yang cocok "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">Tidak ada hasil yang cocok "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../0o/Pertemuan_18.html" class="navigation navigation-prev " aria-label="Previous page: 15. Pengenalan LPWAN, LoRa, dan NB-IoT">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../0q/Pertemuan_21.html" class="navigation navigation-next " aria-label="Next page: 17. Pengenalan Komunikasi Protokol HTTP">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"16. Praktik Update Firmware OTA","level":"1.18","depth":1,"next":{"title":"17. Pengenalan Komunikasi Protokol HTTP","level":"1.19","depth":1,"path":"0q/Pertemuan_21.md","ref":"0q/Pertemuan_21.md","articles":[]},"previous":{"title":"15. Pengenalan LPWAN, LoRa, dan NB-IoT","level":"1.17","depth":1,"path":"0o/Pertemuan_18.md","ref":"0o/Pertemuan_18.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"id","gitbook":"*"},"file":{"path":"0p/Pertemuan_19.md","mtime":"2024-08-12T12:37:29.742Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-08-12T12:38:23.166Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

